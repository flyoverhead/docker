# `flyoverhead.docker.drone`

`Drone` docker service deployment.

## Role variables

| Variable | Description | Example |
| :--- | :--- | :--- |
| `service_root_path` | Root path for services files on host machine | `/opt/docker_services` |
| `docker_restart_policy` | Docker containers restart policy | `always` |
| `docker_network_mode` | Docker containers network mode | `host` |
| `timezone` | Default timezone for docker services | `Europe/Moscow` |
| `drone_name` | Drone service name (used for container's and folder's names) | `drone` |
| `drone_image` | Drone docker image name | `drone/drone` |
| `drone_tag` | Drone docker image version tag | `2.20.0` |
| `drone_server_proto` | IP protocol of Drone server used to create webhooks and redirect urls | `http` |
| `drone_server_host` | IP/FQDN of Drone server used to create webhooks and redirect urls | `192.168.1.1` |
| `drone_server_port` | Drone service HTTP port | `8000` |
| `drone_rpc_secret` | Drone shared secret used to authenticate the RPC connection to the server (can be generated by running `openssl rand -hex 16`) | `c8df9027745212b3b19416cc2247d9ce` |
| `drone_admin_username` | Drone admin user name | `drone` |
| `drone_admin_token` | Drone admin user token (can be generated by running `openssl rand -hex 16`) | `f553387083d88b9c3858be041cd31929` |
| `drone_gitea_server` | Gitea server address | `http://192.168.1.1:8020` |
| `drone_gitea_user_token` | Gitea user api token used for Gitea Drone application creation | `f627b324e42464c3d72ad05cc3d16c0a8e83392d` |
| `drone_db_type` | External database type | `postgres` |
| `drone_db_address` | External database address (FQDN/IP with port) | `192.168.1.1:5432` |
| `drone_db_name` | External database name | `drone` |
| `drone_db_user` | External database owner username | `drone` |
| `drone_db_password` | External database owner password | `drone` |

## Dependencies

| Name | Description |
| :--- | :--- |
| `flyoverhead.docker.docker` | [README.md](../docker/README.md) |
| `flyoverhead.docker.postgres` | [README.md](../postgres/README.md) |
| `flyoverhead.docker.gitea` | [README.md](../gitea/README.md) |

## Example playbook

```yaml
- hosts: host
  roles:
      - role: flyoverhead.docker.docker
      - role: flyoverhead.docker.postgres
      - role: flyoverhead.docker.gitea
      - role: flyoverhead.docker.drone
```

## License

Apache-2.0

## Author Information

fLy0v3rH34d
